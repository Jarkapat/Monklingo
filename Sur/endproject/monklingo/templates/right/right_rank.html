<aside class="w-80 bg-white fixed top-0 right-10 h-full mt-10 p-4">
    <!-- ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="flex items-center space-x-4 mb-6">
        <div class="w-12 h-12 rounded-full overflow-hidden border border-black flex-shrink-0">
            {% if request.user.profile_picture %}
            <img src="{{ request.user.profile_picture.url }}" alt="Profile Picture" class="w-full h-full object-cover">
            {% else %}
            <div class="w-full h-full flex items-center justify-center bg-gray-200">
                <i class="text-gray-600 text-lg">üë§</i>
            </div>
            {% endif %}
        </div>
        <span class="text-xl font-bold text-gray-900">
            {{ request.user.username }}
        </span>
    </div>

    <div class="bg-yellow-100 rounded-lg p-4 mb-6 relative border">
        <div class="flex justify-between items-center mb-2">
            <h3 class="text-lg font-bold">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</h3>
            <a href='/ranking' class="text-gray-500 hover:underline">‡∏î‡∏π</a>
        </div>
        {% if user_rank and user_rank != "N/A" and user_rank != "None" %}
            <p class="text-gray-700">‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö #{{ user_rank }}</p>
        {% else %}
            <p class="text-gray-700">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</p>
        {% endif %}
        <p class="text-sm text-gray-600">‡∏ï‡∏±‡∏Å‡∏ö‡∏≤‡∏ï‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...</p>
    </div>

    <div class="bg-yellow-100 rounded-lg p-4 relative">
        <div class="flex justify-between items-center mb-2">
            <h3 class="text-lg font-bold">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h3>
            <a href="/news" class="text-gray-500 text-sm hover:underline">‡∏î‡∏π</a>
        </div>
        {% if latest_news %}
        <p class="text-gray-700 font-semibold truncate w-64" title="{{ latest_news.title }}">
            {{ latest_news.heading|truncatechars:50 }}
        </p>
        <p class="text-sm text-gray-600 truncate w-64" title="{{ latest_news.content }}">
            {{ latest_news.content|truncatechars:100 }}
        </p>
        {% else %}
        <p class="text-gray-700">‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏∞‡πÑ‡∏£...</p>
        {% endif %}
    </div>
    <button class="noto w-full bg-blue-500 text-white py-2 px-4 rounded-lg mt-6 hover:bg-blue-600 border"
        onclick="shareRanking(this)"
        data-user-rank="{{ user_rank|default:'N/A' }}"
        data-user-id="{{ shared_user_id }}">
        ‡πÅ‡∏ä‡∏£‡πå‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏ô Facebook
    </button>

    <script>
        function shareRanking(button) {
            var timestamp = new Date().getTime();
            var userId = button.getAttribute("data-user-id");
            var shareUrl = "https://614a-49-229-22-66.ngrok-free.app/ranking/?user_id=" + userId + "&fbclid=" + timestamp;
    
            var userRank = button.getAttribute("data-user-rank");
    
            var quote = (userRank !== "N/A") ? 
                encodeURIComponent("üéâ ‡∏â‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö #" + userRank + " ‡πÉ‡∏ô Monklingo! ‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ï‡∏±‡∏Å‡∏ö‡∏≤‡∏ï‡∏£‡∏Å‡∏±‡∏ô! üôè") : 
                encodeURIComponent("üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô Monklingo! ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏Å‡∏ö‡∏≤‡∏ï‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö!");
    
            var hashtag = encodeURIComponent("#Monklingo #‡∏ï‡∏±‡∏Å‡∏ö‡∏≤‡∏ï‡∏£");
    
            console.log("Sharing URL:", shareUrl); // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤ shareUrl ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    
            window.open(
                "https://www.facebook.com/sharer/sharer.php?u=" + shareUrl + "&quote=" + quote + "&hashtag=" + hashtag,
                "facebook-share-dialog",
                "width=600,height=400"
            );
            return false;
        }
    </script>

</aside>