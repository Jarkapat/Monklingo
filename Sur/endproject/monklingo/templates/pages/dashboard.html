{% extends 'base/base_user.html' %}

{% block main %}
<style>
    /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ç‡∏≠‡∏á Dashboard */
    .dashboard-card {
        background-color: #fffbe6; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡πà‡∏≠‡∏ô */
        border-radius: 12px; /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô */
        padding: 1.5rem;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* ‡πÄ‡∏á‡∏≤ */
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .dashboard-card:hover {
        transform: translateY(-4px); /* ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
        box-shadow: 0 8px 10px rgba(0, 0, 0, 0.15); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤ */
    }

    /* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
    table {
        width: 100%; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
        border-collapse: collapse; /* ‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
        font-family: 'Arial', sans-serif; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
        table-layout: fixed; /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏î‡∏∏‡∏• */
    }

    th, td {
        text-align: center; /* ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
        vertical-align: middle; /* ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
        padding: 12px 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÄ‡∏ã‡∏•‡∏•‡πå */
        border-bottom: 1px solid #ddd; /* ‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏ã‡∏•‡∏•‡πå */
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
    th {
        background-color: #f9e58d; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
        font-weight: bold; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏ô‡∏≤ */
        color: #333; /* ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
    }

    /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÅ‡∏ñ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡πâ */
    tr:hover {
        background-color: #f1f1f1; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏µ‡πâ‡πÄ‡∏°‡∏≤‡∏™‡πå */
    }

    /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ß */
    tbody tr:nth-child(odd) {
        background-color: #fdf9f0; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà */
    }

    tbody tr:nth-child(even) {
        background-color: #ffffff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà */
    }

    /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 4 (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û) */
    th:nth-child(4), td:nth-child(4) {
        min-width: 100px;
    }

    /* ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
    .alert {
        color: #e3342f; /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á */
        font-weight: bold;
        text-align: center;
        margin-top: 1rem;
        font-size: 1.5rem;
        display: block;
    }
</style>


<div class="mx-auto py-6 px-4 ml-10">
    <div class="grid grid-cols-6 gap-6 mb-6">
        <div class="dashboard-card col-start-1 col-end-3">
            <p class="text-lg font-semibold noto">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</p>
            <h1 class="text-5xl font-bold mt-2 text-yellow-600 noto">{{ users_today }} ‡∏Ñ‡∏ô</h1>
        </div>
        <div class="dashboard-card col-start-3 col-end-5">
            <p class="text-lg font-semibold noto">‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</p>
            <h1 class="text-5xl font-bold mt-2 text-yellow-600 noto">{{ photos_today }} ‡∏Ñ‡∏ô</h1>
        </div>
        <div class="dashboard-card col-start-5 col-end-7">
            <p class="text-lg font-semibold noto">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</p>
            <h1 class="text-5xl font-bold mt-2 text-yellow-600 noto">{{ users_total }} ‡∏Ñ‡∏ô</h1>
        </div>
        <div class="dashboard-card col-start-1 col-end-4">
            <p class="text-lg font-semibold noto">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏ó‡∏™‡∏ß‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</p>
            <h1 class="text-5xl font-bold mt-2 text-yellow-600 noto">{{ total_prayers }} ‡∏ö‡∏ó</h1>
        </div>
        <div class="dashboard-card col-start-4 col-end-7">
            <p class="text-lg font-semibold noto">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</p>
            <h1 class="text-5xl font-bold mt-2 text-yellow-600 noto">{{ users_registered_today }} ‡∏Ñ‡∏ô</h1>
        </div>
    </div>
    <div class="bg-white shadow-md rounded-lg p-6 mb-6 text-center">
        <h2 class="text-lg font-bold mb-4">üî• ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1 ‡∏Ç‡∏≠‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h2>
    
        {% if top_user %}
            <div class="flex flex-col items-center">
                {% if top_user.profile_picture %}
                    <img src="{{ top_user.profile_picture }}" alt="Profile Picture" 
                         class="w-24 h-24 rounded-full border-4 border-yellow-500 shadow-md">
                {% else %}
                    <div class="w-24 h-24 flex items-center justify-center rounded-full border-4 border-yellow-500 shadow-md bg-gray-200">
                        <span class="text-4xl text-gray-600">üë§</span>
                    </div>
                {% endif %}
                
                <h3 class="text-xl font-semibold mt-3">{{ top_user.username }}</h3>
                <p class="text-gray-500 text-sm">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß {{ top_user.photo_count }} ‡∏£‡∏π‡∏õ</p>
            </div>
            <p class="text-gray-400 mt-3 italic">
                ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ {{ total_competitors }} ‡∏Ñ‡∏ô ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏Å‡∏±‡∏ô!
            </p>
        {% else %}
            <p class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</p>
        {% endif %}
    </div>    
    <div class="bg-white shadow-md rounded-lg p-6 mb-6 noto">
        <h2 class="text-lg font-bold mb-4 noto">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>

        <form method="GET" action="" class="mb-6 flex items-center space-x-4">
            <label for="month" class="font-bold text-lg">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
            <select name="month" id="month" class="border border-gray-300 rounded px-4 py-2" onchange="this.form.submit()">
                {% for m in months %}
                <option value="{{ m.value }}" {% if m.value == selected_month %}selected{% endif %}>
                    {{ m.name }}
                </option>
                {% endfor %}
            </select>
        </form>

        {% if photo_summary and photo_summary|length > 0 %}
        <div id="userChart" style="width: 100%; height: 400px;"></div>
        {% else %}
        <p class="alert">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
        {% endif %}
    </div>

    <div class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-lg font-bold mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ</h2>
        <canvas id="histogramChart"></canvas>
    </div>


    {% if request.user.is_superuser or request.user.is_staff %}
    <div class="bg-white p-6 noto">
        <h2 class="text-lg font-bold mb-4">‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏Å‡∏ö‡∏≤‡∏ï‡∏£</h2>

        <!-- ‚úÖ ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
        <form method="GET" action="" class="mb-4 flex space-x-4 items-center">
            <label for="date" class="font-bold text-lg">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</label>
            <select name="date" id="date" class="border border-gray-300 rounded px-4 py-2" onchange="this.form.submit()">
                {% for date in available_dates %}
                    <option value="{{ date|date:'Y-m-d' }}" {% if date|date:'Y-m-d' == selected_date %}selected{% endif %}>
                        {{ date|date:"d/m/Y" }}
                    </option>
                {% endfor %}
            </select>
        </form>

        <div class="overflow-x-auto bg-yellow-100 rounded-lg shadow-lg">
            <table class="w-full table-auto">
                <thead>
                    <tr class="bg-yellow-200 noto">
                        <th class="p-4 border-b">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                        <th class="p-4 border-b">‡πÄ‡∏ß‡∏•‡∏≤</th>
                        <th class="p-4 border-b">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                        <th class="p-4 border-b">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                    </tr>
                </thead>
                <tbody>
                    {% for image in user_images %}
                    <tr class="{% cycle 'hover:bg-yellow-50' 'noto' %}">
                        <td class="p-4 border-b noto">{{ image.user.username }}</td>
                        <td class="p-4 border-b noto">{{ image.uploaded_at|time:"H:i" }}</td>
                        <td class="p-4 border-b noto">{{ image.uploaded_at|date:"d/m/Y" }}</td>
                        <td class="p-4 border-b text-center noto">
                            <a href="#" class="text-blue-500 hover:underline openModal" data-image="{{ image.image.url }}">‡∏î‡∏π</a>
                        </td>                        
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="p-4 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
</div>

<!-- ‚úÖ ‡πÉ‡∏ä‡πâ Plotly ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà -->
<script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("üìä Photo Summary:", JSON.parse('{{ photo_summary|safe }}'));
        console.log("üìä Histogram Data:", JSON.parse('{{ histogram_summary|safe }}'));

        // ‚úÖ Line Graph (Plotly)
        const photoSummary = JSON.parse('{{ photo_summary|safe }}');
        const labels = photoSummary.map(item => item.uploaded_date);
        const data = photoSummary.map(item => item.total_photos);

        Plotly.newPlot('userChart', [{
            x: labels,
            y: data,
            mode: 'lines+markers',
            type: 'scatter',
            marker: { size: 6, }
        }], {
            title: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô',
            xaxis: { title: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà', type: 'category', tickmode: 'linear' },
            yaxis: { title: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ', tickmode: 'linear', dtick: 1, tickformat: '.0f' }
        });

        // ‚úÖ Histogram (Chart.js)
        const histogramData = JSON.parse('{{ histogram_summary|safe }}');
        const ctxHistogram = document.getElementById("histogramChart")?.getContext("2d");

        if (ctxHistogram) {
            new Chart(ctxHistogram, {
                type: "bar",
                data: {
                    labels: histogramData.map(item => item.uploaded_time),
                    datasets: [{
                        label: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î",
                        data: histogramData.map(item => item.total_photos),
                        backgroundColor: "rgba(54, 162, 235, 0.7)",
                        borderColor: "rgba(54, 162, 235, 1)",
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: { title: { display: true, text: "‡πÄ‡∏ß‡∏•‡∏≤" } },
                        y: { 
                            title: { display: true, text: "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏π‡∏õ" }, 
                            beginAtZero: true,
                            ticks: { stepSize: 1, precision: 0 }  // ‚úÖ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ y-axis ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°
                        }
                    }
                }
            });
        }

        // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
        document.getElementById("month").addEventListener("change", function () {
            this.form.submit();
        });

        // ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î Modal ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
        const modal = document.getElementById("imageModal");
        const modalImage = document.getElementById("modalImage");
        const closeModal = document.getElementById("closeModal");

        if (modal && modalImage && closeModal) {
            document.querySelectorAll(".openModal").forEach(link => {
                link.addEventListener("click", function (event) {
                    event.preventDefault();
                    modalImage.src = this.getAttribute("data-image");
                    modal.classList.remove("hidden");
                });
            });

            closeModal.addEventListener("click", function () {
                modal.classList.add("hidden");
            });

            modal.addEventListener("click", function (event) {
                if (event.target === modal) {
                    modal.classList.add("hidden");
                }
            });
        }
    });
    const dateDropdown = document.getElementById("date");
        if (dateDropdown) {
            dateDropdown.addEventListener("change", function () {
                const selectedDate = this.value;
                console.log("üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:", selectedDate);

                // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï query string
                const currentURL = new URL(window.location.href);
                currentURL.searchParams.set("date", selectedDate);

                // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                window.location.href = currentURL.toString();
            });
        } else {
            console.log("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö element <select id='date'>");
        }

    
</script>


{% endblock %}
