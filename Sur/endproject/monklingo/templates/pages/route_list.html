{% extends 'base/base.html' %}
{% block main %}

<div class="flex-1 overflow-y-auto ml-[300px] mt-10">
    
    <!-- ‚úÖ ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡∏±‡∏î -->
    <div class="bg-yellow-200 p-2 rounded-lg shadow-md mb-6 w-full sm:w-[1230px]">
      <label for="temple_select" class="block text-gray-800 noto font-medium mb-2">
         ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
      </label>
      <select id="temple_select" onchange="fetchRoutes()" 
        class="w-full sm:w-[1200px] border border-gray-300 rounded-lg focus:ring focus:ring-yellow-400 noto bg-white">
        <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î --</option>
      </select>
    </div>
    <!-- ‚úÖ ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà -->
    <div id="map" class="w-full sm:w-[1230px] h-[600px] border border-black rounded-lg shadow-lg mb-5 "></div>
    <!-- ‚úÖ Event ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
    <div id="event_list" class="hidden bg-red-300 text-center p-3 rounded-lg text-lg text-white sm:w-[1230px]">
        <h2 class="text-lg font-semibold">üìÖ ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
        <ul id="events"></ul>
    </div>

    {% if request.user.is_superuser or request.user.is_staff %}
    <!-- ‚úÖ ‡∏õ‡∏∏‡πà‡∏° "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á" -->
    <div class="flex mt-3">
        <a href="/manage/routes" 
           class="px-4 py-2 bg-blue-500 text-white text-sm font-medium rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-300 noto">
           ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
        </a>
    </div>
    {% endif %}
</div>
{% if messages %}
    <div id="alertContainer" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50">
        {% for message in messages %}
            <div class="p-4 rounded shadow-lg text-white 
                {% if message.tags == 'success' %} bg-green-500 {% elif message.tags == 'error' %} bg-red-500 {% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    <script>
        setTimeout(() => {
            document.getElementById("alertContainer").style.display = "none";
        }, 3000);  // ‡∏ã‡πà‡∏≠‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    </script>
{% endif %}
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Routing Machine CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Routing Machine JS -->
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let map, movingMarkers = {};
let checkpointMarkers = {};
let routeCoords = {};
let checkpoints = {};
let totalDistance = {};
let totalTravelTime = {};
let routeSegments = {};
let routeStartTimes = {}; // ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
let userMarker = null;



function initMap() {
    map = L.map("map").setView([13.736717, 100.523186], 25);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
}
window.onload = function () {
    console.log("‚úÖ Window fully loaded, initializing map...");
    initMap();
    getUserLocation();
    fetchTemples();
};
// ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏±‡∏î
async function fetchTemples() {
    try {
        let response = await fetch("/api/temples/");
        let temples = await response.json();
        console.log("‚úÖ Loaded temples:", temples);

        let select = document.getElementById("temple_select");
        select.innerHTML = `<option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î --</option>`;

        temples.forEach(temple => {
            let option = document.createElement("option");
            option.value = temple.id;
            option.textContent = temple.name;
            select.appendChild(option);
        });

        select.addEventListener("change", fetchRoutes);
    } catch (error) {
        console.error("‚ùå Error fetching temples:", error);
    }
}

// ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
async function fetchRoutes() {
    let templeId = document.getElementById("temple_select").value;
    if (!templeId) {
        console.log("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á");
        document.getElementById("event_list").classList.add("hidden");
        return;
    }

    try {
        let response = await fetch(`/api/routes/${templeId}/`);
        if (!response.ok) throw new Error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏î‡πâ");

        let routes = await response.json();
        console.log("‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", routes);

        routes.forEach(route => {
            routeStartTimes[route.id] = route.start_time; // ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
            loadCheckpoints(route.id);
        });
        fetchEvents(templeId);
    } catch (error) {
        console.error("‚ùå Error fetching routes:", error);
    }
}

// ‚úÖ ‡πÇ‡∏´‡∏•‡∏î Checkpoints ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
async function loadCheckpoints(routeId) {
    try {
        let response = await fetch(`/api/routes/${routeId}/checkpoints/`);
        checkpoints[routeId] = await response.json();
        console.log(`‚úÖ Loaded checkpoints for Route ID: ${routeId}`, checkpoints[routeId]);

        if (checkpoints[routeId].length < 2) {
            console.log("‚ùå ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏à‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á!");
            return;
        }

        if (!checkpointMarkers[routeId]) checkpointMarkers[routeId] = [];
        if (!routeSegments[routeId]) routeSegments[routeId] = [];

        checkpointMarkers[routeId].forEach(marker => map.removeLayer(marker));
        checkpointMarkers[routeId] = [];

        let waypoints = [];
        let routePath = [];
        let bounds = [];

        let start_time = routeStartTimes[routeId];
        let [hours, minutes] = start_time.split(":").map(Number);

        let scheduledStartTime = new Date();
        scheduledStartTime.setHours(hours, minutes, 0, 0);
        let formattedScheduledStartTime = new Intl.DateTimeFormat('th-TH', { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit' }).format(scheduledStartTime);
        
        let currentTime = new Date();
        let formattedCurrentTime = new Intl.DateTimeFormat('th-TH', { timeZone: 'Asia/Bangkok', hour: '2-digit', minute: '2-digit', second: '2-digit' }).format(currentTime);
        
        let delay = scheduledStartTime - currentTime;
        if (delay < 0) delay = 0; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß

        console.log(`‚åö ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${formattedCurrentTime}`);
        console.log(`üìå ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô (‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•): ${formattedScheduledStartTime}`);
        console.log(`üïí ‡∏û‡∏£‡∏∞‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${delay / 1000} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`);

        let totalElapsedTime = 0;
        let currentCheckpointIndex = 0;

        checkpoints[routeId].forEach((cp, index) => {
            if (index === 0) {
                totalElapsedTime = 0;
            } else {
                totalElapsedTime += (cp.travel_time || 1) * 60000;
            }

            if (currentTime >= new Date(scheduledStartTime.getTime() + totalElapsedTime)) {
                currentCheckpointIndex = index;
            }

            let arrivalTime = new Date(scheduledStartTime.getTime() + totalElapsedTime);
            let formattedTime = arrivalTime.toLocaleTimeString("th-TH", { hour: '2-digit', minute: '2-digit' });

            let marker = L.marker([cp.lat, cp.lon], {
                icon: L.icon({
                    iconUrl: "https://cdn-icons-png.flaticon.com/512/3448/3448577.png",
                    iconSize: [30, 30],
                    iconAnchor: [20, 30],
                })
            }).bindPopup(`<b>${cp.name}</b><br>üïí ‡πÄ‡∏ß‡∏•‡∏≤ ${formattedTime}`).addTo(map);

            checkpointMarkers[routeId].push(marker);
            waypoints.push(L.latLng(cp.lat, cp.lon));
            routePath.push([cp.lat, cp.lon]);
            bounds.push([cp.lat, cp.lon]);
        });

        console.log(`üìç ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏á Route ID: ${routeId} ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î ${currentCheckpointIndex}`);

        if (routeSegments[routeId]) {
            routeSegments[routeId].forEach(segment => map.removeLayer(segment));
        }

        // ‚úÖ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏ß‡∏á ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÑ‡∏î‡πâ
        routeSegments[routeId] = [];
        for (let i = 0; i < waypoints.length - 1; i++) {
            let segment = L.polyline([waypoints[i], waypoints[i + 1]], { color: 'blue' }).addTo(map);
            routeSegments[routeId].push(segment);
        }

        let routeBounds = L.latLngBounds(bounds);
        map.fitBounds(routeBounds);

        if (!movingMarkers[routeId]) {
            movingMarkers[routeId] = L.marker([checkpoints[routeId][currentCheckpointIndex].lat, checkpoints[routeId][currentCheckpointIndex].lon], {
                icon: L.icon({
                    iconUrl: "/static/images/monk_marker.png",
                    iconSize: [50, 50],
                    iconAnchor: [20, 50],
                })
            }).addTo(map);
        } else {
            movingMarkers[routeId].setLatLng([checkpoints[routeId][currentCheckpointIndex].lat, checkpoints[routeId][currentCheckpointIndex].lon]);
        }

        setTimeout(() => {
            console.log("üö∂‚Äç‚ôÇÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß!");
            moveMarkerAlongRoute(routeId, waypoints, currentCheckpointIndex);
        }, delay);

    } catch (error) {
        console.error("‚ùå Error loading checkpoints:", error);
    }
}



// ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà Marker ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô
function moveMarkerAlongRoute(routeId, waypoints, startIndex) {
    let index = startIndex;

    function moveToNextPoint() {
        if (index >= waypoints.length - 1) {
            console.log(`‚úÖ ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏á Route ID: ${routeId} ‡πÄ‡∏î‡∏¥‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!`);
            return;
        }

        let start = waypoints[index];
        let end = waypoints[index + 1];

        let travelTime = (checkpoints[routeId][index].travel_time || 1) * 60000;

        console.log(`üö∂ ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏á Route ID: ${routeId} ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà ${index} ‡πÑ‡∏õ ${index + 1} ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ${(travelTime / 1000).toFixed(2)} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`);

        let startTime = performance.now();

        function animateMarker() {
            let now = performance.now();
            let elapsed = now - startTime;
            let progress = Math.min(elapsed / travelTime, 1);

            let lat = start.lat + (end.lat - start.lat) * progress;
            let lon = start.lng + (end.lng - start.lng) * progress;

            movingMarkers[routeId].setLatLng([lat, lon]);

            if (progress < 1) {
                requestAnimationFrame(animateMarker);
            } else {
                console.log(`‚úÖ ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏á Route ID: ${routeId} ‡πÄ‡∏î‡∏¥‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà ${index + 1}`);

                // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô
                if (routeSegments[routeId] && routeSegments[routeId][index]) {
                    routeSegments[routeId][index].setStyle({ color: 'green' });
                }

                setTimeout(() => {
                    index++;
                    moveToNextPoint();
                }, 500);
            }
        }

        requestAnimationFrame(animateMarker);
    }

    moveToNextPoint();
}
function getUserLocation() {
    if (!navigator.geolocation) {
        console.error("‚ùå ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Geolocation");
        return;
    }

    navigator.geolocation.watchPosition(
        (position) => {
            let userLat = position.coords.latitude;
            let userLon = position.coords.longitude;
            console.log(`üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${userLat}, ${userLon}`);

            if (userMarker) {
                userMarker.setLatLng([userLat, userLon]);
                console.log("üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á userMarker");
            } else {
                userMarker = L.marker([userLat, userLon], {
                    icon: L.icon({
                        iconUrl: "https://cdn-icons-png.flaticon.com/512/684/684908.png", // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                        iconSize: [35, 35],
                        iconAnchor: [17, 35],
                    })
                }).bindPopup("üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì").addTo(map);
                console.log("‚úÖ userMarker ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà");
            }
        },
        (error) => {
            console.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:", error.message);
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
}

async function fetchEvents(templeId) {
    try {
        let response = await fetch(`/api/events/${templeId}/`);
        let events = await response.json();
        let eventList = document.getElementById("events");
        let eventContainer = document.getElementById("event_list");

        eventList.innerHTML = "";

        if (events.length === 0) {
            eventList.style.display = "none";
        } else {
            eventList.style.display = "block";
            events.forEach(event => {
                let item = document.createElement("li");
                item.innerHTML = `
                    <span>
                        ${event.date} - 
                        ${event.event_type === "‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∞" ? "üìå ‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∞" : ""}
                        ${event.event_type === "‡∏Å‡∏¥‡∏à‡∏ô‡∏¥‡∏°‡∏ô‡∏ï‡πå" ? "‚ö†Ô∏è ‡∏Å‡∏¥‡∏à‡∏ô‡∏¥‡∏°‡∏ô‡∏ï‡πå" : ""}
                        ${event.event_type === "‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®" ? "üåßÔ∏è ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®" : ""}
                        ${event.description} 
                        ${event.is_canceled ? "(‡∏á‡∏î‡∏ö‡∏¥‡∏ì‡∏ë‡∏ö‡∏≤‡∏ï)" : ""}
                    </span>
                `;
                eventList.appendChild(item);
            });
        }

        eventContainer.classList.remove("hidden"); // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á Event Container ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

    } catch (error) {
        console.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏î‡πâ:", error);
    }
}
</script>

{% endblock %}
